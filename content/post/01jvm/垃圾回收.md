---
title: jvm垃圾回收
description: jvm垃圾回收算法相关
date: 2021-03-14
tags:
    - JVM
categories:
    - JVM
    - 算法
---

## jvm垃圾回收
### 垃圾回收算法

针对 堆内存回收； 

方法区：

- java 8 前 永久区（也参与垃圾回收，一样的算法，省事了，但是有默认最大内存限制，容易oom）

- java 8 彻底抛弃了 永久区，叫元数据区，使用本地内存

#### 分代收集理论

新生代

老年代

跨代引用： Remember set            

#### 标记清除

产生内存碎片，内存分配复杂了。 可能需要类似硬盘的  “分区空闲分配链表” 等复杂方式解决

Cms搜集器在old 区回收时采用， 但是内存碎片达到一定量，会采取一次标记清理。（和稀泥的做法，结合两者，）

#### 标记复制

一般用于新生代回收:  Serial  ParNew 的新生代采用该算法

Ēden scurvivor scurvivor 8:1:1

对象存活率较高时，需要更多的复制操作，效率会降低

#### 标记整理

用于old区：

相对于 标记清除， 标记后，需要移动：将存活的对象移动到内存区域的一端。

- 移动：增大的延迟，stw时间长些，但解决了内存碎片，内存分配复杂的问题，可以提高吞吐量。

- 不移动：降低了延迟，但内存碎片，内存分配复杂， 吞吐量有所下降。



### 垃圾回收器

 

